{"version":3,"file":"commonHelpers.js","sources":["../src/js/fetchAPI.js","../src/js/homeCatRender.js","../src/js/homeRender.js","../src/js/refs.js","../src/js/categories.js","../src/js/localStorage.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n// https://example.com/invalid_url - не рабочая ссылка для проверки ошибок\nconst BASE_URL = 'https://books-backend.p.goit.global/books/';\n\nexport async function fetchTopBooks() {\n  return await axios.get(`${BASE_URL}top-books`);\n}\n\nexport async function fetchCategoriesList() {\n  return await axios.get(`${BASE_URL}category-list`);\n}\n\nexport async function fetchSelectedCategory(category) {\n  return await axios.get(`${BASE_URL}category?category=${category}`);\n}\n\nexport async function fetchBookDetails(bookId) {\n  return await axios.get(`${BASE_URL}${bookId}`);\n}\n","import { fetchSelectedCategory } from './fetchAPI';\nimport { seeMoreBtn, categoriesList, loadHomeBooks } from './homeRender';\nimport iziToast from 'izitoast';\nlet listForRender;\nexport const sectionTitle = document.querySelector('.main-category-title');\n\nexport function LoadHomeCategory(data) {\n  const categoryTitle = data;\n  console.log(data);\n  fetchSelectedCategory(categoryTitle)\n    .then(category => {\n      if (Object.keys(category.data).length !== 0) {\n        categoriesList.innerHTML = '';\n        renderCategoryBooks(category.data, categoryTitle);\n      } else {\n        categoriesList.innerHTML = '';\n        iziToast.error({\n          message: 'Sorry, there are no books to render',\n          position: `topRight`,\n        });\n      }\n    })\n    .catch(error => {\n      console.log('Error loading data:', error);\n      iziToast.info({\n        message: 'Sorry, there are no books to render',\n        position: `topRight`,\n        timeout: 3000,\n        progressBar: false,\n        title: 'Error',\n        // ...optionsIziToastError\n      });\n    });\n}\nfunction renderCategoryBooks(category, listName) {\n  categoriesList.insertAdjacentHTML(\n    'afterbegin',\n    `<ul class=\"category-books-list\"></ul>`\n  );\n  listForRender = document.querySelector('.category-books-list');\n  const markupCategoryBooks = category\n    .map(book => {\n      return `\n        <li class=\"home-books-item\" id=\"${book._id}\">\n        <div class=\"image-overlay\">\n            <img class=\"book-image\" src=\"${book.book_image}\" alt=\"${book.title}\">\n            <p class=\"image-overlay-text\">QUICK VIEW</p>\n        </div>\n            <div class=\"book-info\">\n                <p class=\"book-title break-text\">${book.title}</p>\n                <p class=\"book-author\">${book.author}</p>\n            </div>\n        </li>`;\n    })\n    .join('');\n  listForRender.insertAdjacentHTML('beforeend', markupCategoryBooks);\n  listForRender.insertAdjacentHTML(\n    'afterend',\n    `<div class=\"all-cat-btn-wrap\"><button class=\"all-cat-btn\">All Categories</button></div>`\n  );\n  let allCatBtn = document.querySelector('.all-cat-btn');\n  listenAllCatBtn(allCatBtn);\n  const titleArr = listName.split(' ');\n  if (titleArr.length > 3) {\n    const middleWord = titleArr[Math.round((titleArr.length - 1) / 2)];\n    let forTitle = listName.split(middleWord).join(' ');\n    forTitle = forTitle.replace(\n      titleArr[titleArr.length - 1],\n      `<span class=\"main-category-title-span\">${\n        titleArr[titleArr.length - 1]\n      }</span>`\n    );\n    sectionTitle.innerHTML = forTitle;\n  } else {\n    listName = listName.replace(\n      titleArr[titleArr.length - 1],\n      `<span class=\"main-category-title-span\">${\n        titleArr[titleArr.length - 1]\n      }</span>`\n    );\n    sectionTitle.innerHTML = listName;\n  }\n}\nfunction listenAllCatBtn(allCatBtn) {\n  allCatBtn.addEventListener('click', () => {\n    loadHomeBooks();\n    baseHomeTitle();\n  });\n}\nexport function baseHomeTitle() {\n  sectionTitle.innerHTML = `Best Sellers <span class=\"main-category-title-span\">Books</span>`;\n}\n","import { fetchTopBooks } from './fetchAPI';\nimport { LoadHomeCategory } from './homeCatRender';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nexport { seeMoreBtn, categoriesList };\nconst categoriesList = document.querySelector('.home-categories-list');\nlet seeMoreBtn;\n\n//  loader\nconst loader = document.querySelector('.loader');\n\nwindow.addEventListener('load', () => {\n  loader.style.display = 'none';\n});\n\n//  loader\n\nconst toastOptions = {\n  titleColor: '#fff',\n  titleSize: '16px',\n  titleLineHeight: '1.5',\n  messageColor: '#fff',\n  messageSize: '16px',\n  messageLineHeight: '1.5',\n  position: 'topRight',\n  timeout: 3000,\n  progressBar: false,\n};\n\nconst optionsIziToastWarning = {\n  ...toastOptions,\n  message: 'none',\n  backgroundColor: '#FFA000',\n};\n\nconst optionsIziToastError = {\n  ...toastOptions,\n  backgroundColor: '#EF4040',\n  maxWidth: 400,\n};\n\nexport function loadHomeBooks() {\n  fetchTopBooks()\n    .then(categories => {\n      if (Object.keys(categories.data).length !== 0) {\n        categoriesList.innerHTML = '';\n        renderHomeCategories(categories.data);\n      } else {\n        categoriesList.innerHTML = '';\n        iziToast.error({\n          message: 'Sorry, there are no books to render',\n          position: `topRight`,\n        });\n      }\n    })\n    .catch(error => {\n      console.log('Error loading data:', error);\n      iziToast.info({\n        message: 'Sorry, there are no books to render',\n        position: `topRight`,\n        timeout: 3000,\n        progressBar: false,\n        title: 'Error',\n        ...optionsIziToastError,\n      });\n    });\n}\nfunction renderHomeCategories(categories) {\n  const markupCategories = categories\n    .map(category => {\n      return `\n        <li class=\"home-categories-item\">\n        <h3 class=\"home-category-title\">${category.list_name}</h3>\n        <ul class=\"home-books-list\">${renderHomeBooks(category.books)}</ul>\n        <div class=\"see-more-wrapper\">\n            <button class=\"button see-more\" data-js=\"${\n              category.list_name\n            }\">See more</button>\n        </div>\n        </li>`;\n    })\n    .join('');\n  categoriesList.insertAdjacentHTML('beforeend', markupCategories);\n  seeMoreBtn = document.querySelectorAll('.see-more');\n  seeMoreListener();\n}\nfunction renderHomeBooks(books) {\n  return books\n    .map(book => {\n      return `\n        <li class=\"home-books-item\" id=\"${book._id}\">\n            <div class=\"image-overlay\">\n                <img class=\"book-image\" src=\"${book.book_image}\" alt=\"${book.title}\">\n                <p class=\"image-overlay-text\">QUICK VIEW</p>\n            </div>\n            <div class=\"book-info\">\n                <p class=\"book-title break-text\">${book.title}</p>\n                <p class=\"book-author\">${book.author}</p>\n            </div>\n        </li>`;\n    })\n    .join('');\n}\nfunction seeMoreListener() {\n  for (let btns of seeMoreBtn) {\n    btns.addEventListener('click', () =>\n      LoadHomeCategory(btns.getAttribute('data-js'))\n    );\n  }\n}\n","export const refs = {\n  themeCheckbox: document.querySelector('#theme-switch'),\n  categoriesRef: document.querySelector('.categories__list'),\n  upButton: document.querySelector('.up-button'),\n};\n","import { refs } from '/js/refs.js';\nimport { LoadHomeCategory } from '/js/homeCatRender.js';\nimport { loadHomeBooks } from './homeRender';\nimport { baseHomeTitle } from './homeCatRender';\n\nrefs.categoriesRef.addEventListener('click', categoriesSelected);\n// console.log(refs.categoriesRef);\n\nexport function categoriesSelected(event) {\n  if (\n    !event ||\n    !event.target ||\n    !event.target.classList.contains('categories__item')\n  ) {\n    return;\n  }\n\n  const selectedCategory = event.target;\n\n  if (selectedCategory.dataset.category === 'all categories') {\n    const allCategories = Array.from(selectedCategory.parentElement.children);\n\n    allCategories.forEach(category => {\n      category.classList.remove('selected');\n    });\n\n    selectedCategory.classList.add('selected');\n\n    loadHomeBooks();\n    baseHomeTitle();\n  } else {\n    const allCategories = Array.from(selectedCategory.parentElement.children);\n\n    allCategories.forEach(category => {\n      category.classList.remove('selected');\n    });\n\n    selectedCategory.classList.add('selected');\n\n    LoadHomeCategory(selectedCategory.dataset.category);\n  }\n}\n","import { refs } from './refs';\nimport {} from './modalWindowFunctions.js';\nconst LOCAL_STORAGE_KEY = 'modal';\n\nexport function onAddThemeLocalStorage() {\n  if (refs.themeCheckbox.checked) {\n    localStorage.setItem('theme', 'dark');\n    // Сюди треба навішати класи для темної теми або функцію яка це робитиме\n  } else {\n    localStorage.removeItem('theme');\n    // Тут треба видалити класи темної теми або створити функцію яка це робитиме\n  }\n}\n\nexport function addToLocalStorage(event, oneBookData) {\n  if (event.target.textContent === 'remove from the shopping list') {\n    removeFromLocalStorage(event);\n    return;\n  }\n  if (!event.target.classList.contains('book-btn')) return;\n  const booksArray = getAllBooks();\n  booksArray.push(oneBookData);\n  localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(booksArray));\n  checkLocalBook(event);\n}\nexport function getAllBooks() {\n  return JSON.parse(localStorage.getItem(LOCAL_STORAGE_KEY)) || [];\n}\n\nfunction checkLocalBook(event) {\n  const booksArray = getAllBooks();\n  const currentBookId = event.target.dataset.id;\n  if (booksArray.find(book => book._id === currentBookId)) {\n    const listBtnRef = event.target;\n    listBtnRef.textContent = 'remove from the shopping list';\n  }\n}\nfunction removeFromLocalStorage(event) {\n  const notesArray = getAllBooks();\n  const id = notesArray.findIndex(elem => {\n    return elem._id === event.target.dataset.id;\n  });\n\n  if (id === undefined || id === -1) return;\n  notesArray.splice(id, 1);\n  localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(notesArray));\n  event.target.textContent = 'add to shopping list';\n}\n","import './js/support';\n/*LIBRARIES\n1. Axios\n(docs) - https://www.npmjs.com/package/axios?activeTab=readme\n2.izitoast\n(docs) - https://www.npmjs.com/package/izitoast\n3.tui-pagination\n(docs) - https://www.npmjs.com/package/tui-pagination\n4.Swiper \n(docs) - https://www.npmjs.com/package/swiper\n*/\nif (localStorage.getItem('theme') === 'dark') {\n  refs.themeCheckbox.checked = true;\n  // Сюди треба навішати класи для темної теми або функцію яка це робитиме\n}\nimport { loadHomeBooks } from './js/homeRender';\nloadHomeBooks();\n\nimport { categoriesSelected } from './js/categories.js';\ncategoriesSelected();\nimport { refs } from './js/refs.js';\nimport { onAddThemeLocalStorage } from './js/localStorage.js';\nrefs.themeCheckbox.addEventListener('change', onAddThemeLocalStorage);\n\n// import { onBookClick, bookListRef } from './js/modalWindowFunctions.js';\n// bookListRef.addEventListener('click', onBookClick);\n"],"names":["BASE_URL","fetchTopBooks","axios","fetchSelectedCategory","category","listForRender","sectionTitle","LoadHomeCategory","data","categoryTitle","categoriesList","renderCategoryBooks","iziToast","error","listName","markupCategoryBooks","book","allCatBtn","listenAllCatBtn","titleArr","middleWord","forTitle","loadHomeBooks","baseHomeTitle","seeMoreBtn","loader","toastOptions","optionsIziToastError","categories","renderHomeCategories","markupCategories","renderHomeBooks","seeMoreListener","books","btns","refs","categoriesSelected","event","selectedCategory","onAddThemeLocalStorage"],"mappings":"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"}